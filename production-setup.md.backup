# Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù„Ù„Ø¥Ù†ØªØ§Ø¬

## ğŸ—„ï¸ MongoDB Ù„Ù„Ø¥Ù†ØªØ§Ø¬

### Ø®ÙŠØ§Ø± 1: MongoDB Atlas (Cloud - Ù…ÙÙˆØµÙ‰ Ø¨Ù‡)
1. Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¹Ù„Ù‰ https://www.mongodb.com/cloud/atlas
2. Ø¥Ù†Ø´Ø§Ø¡ cluster Ù…Ø¬Ø§Ù†ÙŠ
3. Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Connection String:
   ```
   mongodb+srv://username:password@cluster0.xxxxx.mongodb.net/realestate_prod
   ```

### Ø®ÙŠØ§Ø± 2: MongoDB Ø¹Ù„Ù‰ VPS/Server
```bash
# Ubuntu/Debian
sudo apt-get update
sudo apt-get install -y mongodb-org

# ØªØ´ØºÙŠÙ„ MongoDB
sudo systemctl start mongod
sudo systemctl enable mongod

# Ø§Ù„Ø­Ù…Ø§ÙŠØ©
sudo ufw allow 27017
```

### Ø®ÙŠØ§Ø± 3: Docker (Ù„Ù„Ø³ÙŠØ±ÙØ±)
```bash
# Ø¥Ù†Ø´Ø§Ø¡ MongoDB container
docker run -d \
  --name mongodb-prod \
  -p 27017:27017 \
  -v mongodb_data:/data/db \
  -e MONGO_INITDB_ROOT_USERNAME=admin \
  -e MONGO_INITDB_ROOT_PASSWORD=strongpassword123 \
  mongo:latest

# Connection string
mongodb://admin:strongpassword123@your-server-ip:27017/realestate_prod?authSource=admin
```

## ğŸ”’ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†

### Environment Variables Ù„Ù„Ø¥Ù†ØªØ§Ø¬
```env
# Database - Production
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/realestate_prod
MONGODB_DATABASE=realestate_prod

# JWT - Strong Keys
JWT_SECRET=your-super-strong-256-bit-secret-key-here-change-this
JWT_ISSUER=your-app-name
JWT_AUDIENCE=your-app-clients
JWT_REALM=your-app-realm

# SMS Service - Real Credentials
PLIVO_AUTH_ID=your_real_plivo_auth_id
PLIVO_AUTH_TOKEN=your_real_plivo_auth_token  
PLIVO_PHONE_NUMBER=+1234567890

# Server - Production
PORT=8080
HOST=0.0.0.0
ENVIRONMENT=production

# Security
RATE_LIMIT_PER_MINUTE=30
```

## ğŸš€ Deployment Options

### Ø®ÙŠØ§Ø± 1: Heroku (Ø³Ù‡Ù„ Ù„Ù„Ù…Ø¨ØªØ¯Ø¦ÙŠÙ†)
```bash
# Ø¥Ù†Ø´Ø§Ø¡ Procfile
echo "web: java -jar build/libs/realestate-all.jar" > Procfile

# Deploy
heroku create your-app-name
git push heroku main
```

### Ø®ÙŠØ§Ø± 2: DigitalOcean/AWS/Azure
```bash
# Build JAR file
./gradlew shadowJar

# Upload to server
scp build/libs/realestate-all.jar user@your-server:/opt/realestate/

# Run on server
java -jar realestate-all.jar
```

### Ø®ÙŠØ§Ø± 3: Docker
```dockerfile
FROM openjdk:17-jdk-slim
COPY build/libs/realestate-all.jar app.jar
EXPOSE 8080
ENTRYPOINT ["java", "-jar", "/app.jar"]
```

## ğŸ“± SMS Service Setup (Plivo)

### 1. Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Plivo
- Ø³Ø¬Ù„ Ø¹Ù„Ù‰ https://www.plivo.com
- Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Auth ID & Auth Token
- Ø§Ø´ØªØ±ÙŠ Ø±Ù‚Ù… Ù‡Ø§ØªÙ

### 2. Ø§Ù„ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø§Ù‡Ø² Ù„Ù„ØªÙƒØ§Ù…Ù„ØŒ ÙÙ‚Ø· Ø¶Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ .env

## ğŸŒ Domain & SSL

### Domain Setup
```bash
# Ø±Ø¨Ø· Domain Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±
# A Record: your-domain.com -> Server IP
# CNAME: api.your-domain.com -> your-domain.com
```

### SSL Certificate (Let's Encrypt)
```bash
sudo apt install certbot
sudo certbot --nginx -d api.your-domain.com
```

## ğŸ“Š Monitoring & Analytics

### Logging
```kotlin
// Ø¥Ø¶Ø§ÙØ© ÙÙŠ Application.kt
install(CallLogging) {
    level = Level.INFO
    format { call ->
        "${call.request.httpMethod.value} ${call.request.uri} - ${call.response.status()}"
    }
}
```

### Health Checks
Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ `/health` endpoint

## ğŸ”„ CI/CD Pipeline

### GitHub Actions
```yaml
name: Deploy
on:
  push:
    branches: [main]
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - uses: actions/setup-java@v2
      with:
        java-version: '17'
    - run: ./gradlew build
    - run: ./gradlew shadowJar
    # Deploy steps here
```

## ğŸ“ˆ Scaling Considerations

### Database Indexing
```javascript
// ÙÙŠ MongoDB
db.properties.createIndex({"title": "text", "description": "text"})
db.properties.createIndex({"countryId": 1, "governorateId": 1})
db.properties.createIndex({"price": 1})
db.properties.createIndex({"uploadTime": -1})
db.users.createIndex({"phone": 1}, {"unique": true})
db.users.createIndex({"email": 1}, {"unique": true})
```

### Load Balancing
```nginx
upstream realestate_app {
    server 127.0.0.1:8080;
    server 127.0.0.1:8081;  # Ù„Ù„ØªÙˆØ³Ø¹
}

server {
    listen 80;
    server_name api.your-domain.com;
    
    location / {
        proxy_pass http://realestate_app;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```
